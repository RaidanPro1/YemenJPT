version: '3.9'

# RaidanPro Sovereign Infrastructure - Master Entry
# Use 'docker compose -f docker-compose.yml -f docker-compose.tools.yml up -d' to include tools.

services:
  gateway:
    image: nginx:stable-alpine
    container_name: raidan-gateway
    restart: always
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./landing_page:/var/www/html:ro # ربط الصفحة التعريفية
      - ./certs:/etc/nginx/certs:ro
      - ./logs/nginx:/var/log/nginx
    networks:
      - raidan_public
    depends_on:
      - app_core

include:
  - docker-compose.core.yml

networks:
  raidan_public:
    driver: bridge
    name: raidan_public
  raidan_private:
    internal: true
    name: raidan_private

volumes:
  db_data:
    name: raidan_db_data
  redis_data:
    name: raidan_redis_data
  system_logs:
    name: raidan_system_logs